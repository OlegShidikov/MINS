\doxysection{Файл FATFS/\+Target/sd\+\_\+diskio.c}
\hypertarget{sd__diskio_8c}{}\label{sd__diskio_8c}\index{FATFS/Target/sd\_diskio.c@{FATFS/Target/sd\_diskio.c}}


SD Disk I/O driver.  


{\ttfamily \#include "{}ff\+\_\+gen\+\_\+drv.\+h"{}}\newline
{\ttfamily \#include "{}sd\+\_\+diskio.\+h"{}}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
Граф включаемых заголовочных файлов для sd\+\_\+diskio.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sd__diskio_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Макросы}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{sd__diskio_8c_a142810068f1b99cd93d3fc9f0e160e02}{QUEUE\+\_\+\+SIZE}}~(uint32\+\_\+t) 10
\item 
\#define \mbox{\hyperlink{sd__diskio_8c_ad2cc981dbb8705da878c9c8fd510647b}{READ\+\_\+\+CPLT\+\_\+\+MSG}}~(uint32\+\_\+t) 1
\item 
\#define \mbox{\hyperlink{sd__diskio_8c_ae387182dbdbb4c60396d9f6ac7958340}{WRITE\+\_\+\+CPLT\+\_\+\+MSG}}~(uint32\+\_\+t) 2
\item 
\#define \mbox{\hyperlink{sd__diskio_8c_a28be5b4ad518f3d24d247e50f0385a9b}{SD\+\_\+\+TIMEOUT}}~30 \texorpdfstring{$\ast$}{*} 1000
\item 
\#define \mbox{\hyperlink{sd__diskio_8c_ae38517ff312078360458aa555211e1df}{SD\+\_\+\+DEFAULT\+\_\+\+BLOCK\+\_\+\+SIZE}}~512
\end{DoxyCompactItemize}
\doxysubsubsection*{Функции}
\begin{DoxyCompactItemize}
\item 
DSTATUS \mbox{\hyperlink{sd__diskio_8c_aad7ae36100f45de75e573a0f5fd3addd}{SD\+\_\+initialize}} (BYTE lun)
\begin{DoxyCompactList}\small\item\em Initializes a Drive. \end{DoxyCompactList}\item 
DSTATUS \mbox{\hyperlink{sd__diskio_8c_a21ca54e56dca1f40b54f458ac35470e3}{SD\+\_\+status}} (BYTE lun)
\begin{DoxyCompactList}\small\item\em Gets Disk Status. \end{DoxyCompactList}\item 
DRESULT \mbox{\hyperlink{sd__diskio_8c_a1f2ee4a775d8a3877f368533db97cbe4}{SD\+\_\+read}} (BYTE lun, BYTE \texorpdfstring{$\ast$}{*}buff, DWORD sector, UINT count)
\begin{DoxyCompactList}\small\item\em Reads Sector(s) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sd__diskio_8c_afc4f1ecdf361e0c0808803167f31d61b}{BSP\+\_\+\+SD\+\_\+\+Write\+Cplt\+Callback}} (void)
\begin{DoxyCompactList}\small\item\em Writes Sector(s) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sd__diskio_8c_a8d66ac35cee6a454f7e584f0051bc9f8}{BSP\+\_\+\+SD\+\_\+\+Read\+Cplt\+Callback}} (void)
\begin{DoxyCompactList}\small\item\em Rx Transfer completed callbacks. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Переменные}
\begin{DoxyCompactItemize}
\item 
const Diskio\+\_\+drv\+Type\+Def \mbox{\hyperlink{sd__diskio_8c_a1a12762eb7b74c246045197fa41f1296}{SD\+\_\+\+Driver}}
\end{DoxyCompactItemize}


\doxysubsection{Подробное описание}
SD Disk I/O driver. 

\begin{DoxyAttention}{Внимание}

\end{DoxyAttention}
Copyright (c) 2023 STMicroelectronics. All rights reserved.

This software is licensed under terms that can be found in the LICENSE file in the root directory of this software component. If no LICENSE file comes with this software, it is provided AS-\/\+IS. 

\doxysubsection{Макросы}
\Hypertarget{sd__diskio_8c_a142810068f1b99cd93d3fc9f0e160e02}\label{sd__diskio_8c_a142810068f1b99cd93d3fc9f0e160e02} 
\index{sd\_diskio.c@{sd\_diskio.c}!QUEUE\_SIZE@{QUEUE\_SIZE}}
\index{QUEUE\_SIZE@{QUEUE\_SIZE}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{QUEUE\_SIZE}{QUEUE\_SIZE}}
{\footnotesize\ttfamily \#define QUEUE\+\_\+\+SIZE~(uint32\+\_\+t) 10}

\Hypertarget{sd__diskio_8c_ad2cc981dbb8705da878c9c8fd510647b}\label{sd__diskio_8c_ad2cc981dbb8705da878c9c8fd510647b} 
\index{sd\_diskio.c@{sd\_diskio.c}!READ\_CPLT\_MSG@{READ\_CPLT\_MSG}}
\index{READ\_CPLT\_MSG@{READ\_CPLT\_MSG}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{READ\_CPLT\_MSG}{READ\_CPLT\_MSG}}
{\footnotesize\ttfamily \#define READ\+\_\+\+CPLT\+\_\+\+MSG~(uint32\+\_\+t) 1}

\Hypertarget{sd__diskio_8c_ae38517ff312078360458aa555211e1df}\label{sd__diskio_8c_ae38517ff312078360458aa555211e1df} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_DEFAULT\_BLOCK\_SIZE@{SD\_DEFAULT\_BLOCK\_SIZE}}
\index{SD\_DEFAULT\_BLOCK\_SIZE@{SD\_DEFAULT\_BLOCK\_SIZE}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_DEFAULT\_BLOCK\_SIZE}{SD\_DEFAULT\_BLOCK\_SIZE}}
{\footnotesize\ttfamily \#define SD\+\_\+\+DEFAULT\+\_\+\+BLOCK\+\_\+\+SIZE~512}

\Hypertarget{sd__diskio_8c_a28be5b4ad518f3d24d247e50f0385a9b}\label{sd__diskio_8c_a28be5b4ad518f3d24d247e50f0385a9b} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_TIMEOUT@{SD\_TIMEOUT}}
\index{SD\_TIMEOUT@{SD\_TIMEOUT}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_TIMEOUT}{SD\_TIMEOUT}}
{\footnotesize\ttfamily \#define SD\+\_\+\+TIMEOUT~30 \texorpdfstring{$\ast$}{*} 1000}

\Hypertarget{sd__diskio_8c_ae387182dbdbb4c60396d9f6ac7958340}\label{sd__diskio_8c_ae387182dbdbb4c60396d9f6ac7958340} 
\index{sd\_diskio.c@{sd\_diskio.c}!WRITE\_CPLT\_MSG@{WRITE\_CPLT\_MSG}}
\index{WRITE\_CPLT\_MSG@{WRITE\_CPLT\_MSG}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{WRITE\_CPLT\_MSG}{WRITE\_CPLT\_MSG}}
{\footnotesize\ttfamily \#define WRITE\+\_\+\+CPLT\+\_\+\+MSG~(uint32\+\_\+t) 2}



\doxysubsection{Функции}
\Hypertarget{sd__diskio_8c_a8d66ac35cee6a454f7e584f0051bc9f8}\label{sd__diskio_8c_a8d66ac35cee6a454f7e584f0051bc9f8} 
\index{sd\_diskio.c@{sd\_diskio.c}!BSP\_SD\_ReadCpltCallback@{BSP\_SD\_ReadCpltCallback}}
\index{BSP\_SD\_ReadCpltCallback@{BSP\_SD\_ReadCpltCallback}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{BSP\_SD\_ReadCpltCallback()}{BSP\_SD\_ReadCpltCallback()}}
{\footnotesize\ttfamily void BSP\+\_\+\+SD\+\_\+\+Read\+Cplt\+Callback (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Rx Transfer completed callbacks. 

BSP Rx Transfer completed callback.


\begin{DoxyParams}{Аргументы}
{\em hsd} & SD handle \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em None} & \\
\hline
\end{DoxyRetVals}
\Hypertarget{sd__diskio_8c_afc4f1ecdf361e0c0808803167f31d61b}\label{sd__diskio_8c_afc4f1ecdf361e0c0808803167f31d61b} 
\index{sd\_diskio.c@{sd\_diskio.c}!BSP\_SD\_WriteCpltCallback@{BSP\_SD\_WriteCpltCallback}}
\index{BSP\_SD\_WriteCpltCallback@{BSP\_SD\_WriteCpltCallback}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{BSP\_SD\_WriteCpltCallback()}{BSP\_SD\_WriteCpltCallback()}}
{\footnotesize\ttfamily void BSP\+\_\+\+SD\+\_\+\+Write\+Cplt\+Callback (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Writes Sector(s) 

BSP Tx Transfer completed callback.


\begin{DoxyParams}{Аргументы}
{\em lun} & \+: not used \\
\hline
{\em \texorpdfstring{$\ast$}{*}buff} & Data to be written \\
\hline
{\em sector} & Sector address (LBA) \\
\hline
{\em count} & Number of sectors to write (1..128) \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em DRESULT} & Operation result\\
\hline
\end{DoxyRetVals}
I/O control operation 
\begin{DoxyParams}{Аргументы}
{\em lun} & \+: not used \\
\hline
{\em cmd} & Control code \\
\hline
{\em \texorpdfstring{$\ast$}{*}buff} & Buffer to send/receive control data \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em DRESULT} & Operation result\\
\hline
\end{DoxyRetVals}
Tx Transfer completed callbacks 
\begin{DoxyParams}{Аргументы}
{\em hsd} & SD handle \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em None} & \\
\hline
\end{DoxyRetVals}
\Hypertarget{sd__diskio_8c_aad7ae36100f45de75e573a0f5fd3addd}\label{sd__diskio_8c_aad7ae36100f45de75e573a0f5fd3addd} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_initialize@{SD\_initialize}}
\index{SD\_initialize@{SD\_initialize}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_initialize()}{SD\_initialize()}}
{\footnotesize\ttfamily DSTATUS SD\+\_\+initialize (\begin{DoxyParamCaption}\item[{BYTE}]{lun }\end{DoxyParamCaption})}



Initializes a Drive. 


\begin{DoxyParams}{Аргументы}
{\em lun} & \+: not used \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em DSTATUS} & Operation status \\
\hline
\end{DoxyRetVals}
Граф вызовов\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sd__diskio_8c_aad7ae36100f45de75e573a0f5fd3addd_cgraph}
\end{center}
\end{figure}
\Hypertarget{sd__diskio_8c_a1f2ee4a775d8a3877f368533db97cbe4}\label{sd__diskio_8c_a1f2ee4a775d8a3877f368533db97cbe4} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_read@{SD\_read}}
\index{SD\_read@{SD\_read}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_read()}{SD\_read()}}
{\footnotesize\ttfamily DRESULT SD\+\_\+read (\begin{DoxyParamCaption}\item[{BYTE}]{lun,  }\item[{BYTE \texorpdfstring{$\ast$}{*}}]{buff,  }\item[{DWORD}]{sector,  }\item[{UINT}]{count }\end{DoxyParamCaption})}



Reads Sector(s) 


\begin{DoxyParams}{Аргументы}
{\em lun} & \+: not used \\
\hline
{\em \texorpdfstring{$\ast$}{*}buff} & Data buffer to store read data \\
\hline
{\em sector} & Sector address (LBA) \\
\hline
{\em count} & Number of sectors to read (1..128) \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em DRESULT} & Operation result \\
\hline
\end{DoxyRetVals}
Граф вызовов\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{sd__diskio_8c_a1f2ee4a775d8a3877f368533db97cbe4_cgraph}
\end{center}
\end{figure}
\Hypertarget{sd__diskio_8c_a21ca54e56dca1f40b54f458ac35470e3}\label{sd__diskio_8c_a21ca54e56dca1f40b54f458ac35470e3} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_status@{SD\_status}}
\index{SD\_status@{SD\_status}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_status()}{SD\_status()}}
{\footnotesize\ttfamily DSTATUS SD\+\_\+status (\begin{DoxyParamCaption}\item[{BYTE}]{lun }\end{DoxyParamCaption})}



Gets Disk Status. 


\begin{DoxyParams}{Аргументы}
{\em lun} & \+: not used \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em DSTATUS} & Operation status \\
\hline
\end{DoxyRetVals}


\doxysubsection{Переменные}
\Hypertarget{sd__diskio_8c_a1a12762eb7b74c246045197fa41f1296}\label{sd__diskio_8c_a1a12762eb7b74c246045197fa41f1296} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_Driver@{SD\_Driver}}
\index{SD\_Driver@{SD\_Driver}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_Driver}{SD\_Driver}}
{\footnotesize\ttfamily const Diskio\+\_\+drv\+Type\+Def SD\+\_\+\+Driver}

{\bfseries Инициализатор}
\begin{DoxyCode}{0}
\DoxyCodeLine{=}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{sd__diskio_8c_aad7ae36100f45de75e573a0f5fd3addd}{SD\_initialize}},}
\DoxyCodeLine{\ \ \mbox{\hyperlink{sd__diskio_8c_a21ca54e56dca1f40b54f458ac35470e3}{SD\_status}},}
\DoxyCodeLine{\ \ \mbox{\hyperlink{sd__diskio_8c_a1f2ee4a775d8a3877f368533db97cbe4}{SD\_read}},}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\ }
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\ }
\DoxyCodeLine{\}}

\end{DoxyCode}
